{
  "info": {
    "name": "FeelSame API",
    "description": "Collection compl√®te des API FeelSame avec authentification automatique",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api"
    },
    {
      "key": "token",
      "value": ""
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-login si pas de token",
          "if (!pm.collectionVariables.get('token')) {",
          "    pm.sendRequest({",
          "        url: pm.collectionVariables.get('baseUrl') + '/auth/login',",
          "        method: 'POST',",
          "        header: {",
          "            'Content-Type': 'application/json'",
          "        },",
          "        body: {",
          "            mode: 'raw',",
          "            raw: JSON.stringify({",
          "                email: 'user1@feelsame.com',",
          "                password: '123456'",
          "            })",
          "        }",
          "    }, function (err, response) {",
          "        if (response && response.json().success) {",
          "            pm.collectionVariables.set('token', response.json().token);",
          "            console.log('Token auto-r√©cup√©r√©');",
          "        }",
          "    });",
          "}"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "üîê Authentification",
      "item": [
        {
          "name": "Inscription",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Connexion",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success) {",
                  "    pm.collectionVariables.set('token', pm.response.json().token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user1@feelsame.com\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Utilisateur Actuel",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "D√©connexion",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "üìù Notes",
      "item": [
        {
          "name": "Cr√©er une Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success) {",
                  "    pm.collectionVariables.set('noteId', pm.response.json().note.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emotion\": \"joie\",\n  \"situation\": \"travail\",\n  \"content\": \"Test Postman - J'ai enfin d√©croch√© le poste de mes r√™ves ! Je suis tellement heureux de cette nouvelle opportunit√©.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/notes",
              "host": ["{{baseUrl}}"],
              "path": ["notes"]
            }
          }
        },
        {
          "name": "Toutes les Notes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes?limit=10&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["notes"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "Notes Filtr√©es",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes?emotion=joie&situation=travail&limit=5",
              "host": ["{{baseUrl}}"],
              "path": ["notes"],
              "query": [
                {
                  "key": "emotion",
                  "value": "joie"
                },
                {
                  "key": "situation",
                  "value": "travail"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          }
        },
        {
          "name": "Note Sp√©cifique",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "{{noteId}}"]
            }
          }
        },
        {
          "name": "Mes Notes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/user/me?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "user", "me"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Rechercher Notes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/search/travail?emotion=joie&limit=5",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "search", "travail"],
              "query": [
                {
                  "key": "emotion",
                  "value": "joie"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "‚ù§Ô∏è R√©actions",
      "item": [
        {
          "name": "Ajouter R√©action",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reactionType\": \"heart\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/reactions/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reactions", "notes", "{{noteId}}"]
            }
          }
        },
        {
          "name": "R√©actions d'une Note",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reactions/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reactions", "notes", "{{noteId}}"]
            }
          }
        },
        {
          "name": "Mes R√©actions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reactions/notes/{{noteId}}/user",
              "host": ["{{baseUrl}}"],
              "path": ["reactions", "notes", "{{noteId}}", "user"]
            }
          }
        },
        {
          "name": "Notes Populaires",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reactions/popular?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["reactions", "popular"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üí¨ Discussions",
      "item": [
        {
          "name": "Rejoindre Discussion",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success) {",
                  "    pm.collectionVariables.set('discussionId', pm.response.json().discussion.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emotion\": \"joie\",\n  \"situation\": \"travail\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/discussions/join",
              "host": ["{{baseUrl}}"],
              "path": ["discussions", "join"]
            }
          }
        },
        {
          "name": "D√©tails Discussion",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/discussions/{{discussionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["discussions", "{{discussionId}}"]
            }
          }
        },
        {
          "name": "Envoyer Message",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Test Postman - F√©licitations pour ton nouveau poste ! C'est formidable ! üéâ\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/discussions/{{discussionId}}/messages",
              "host": ["{{baseUrl}}"],
              "path": ["discussions", "{{discussionId}}", "messages"]
            }
          }
        },
        {
          "name": "Messages Discussion",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/discussions/{{discussionId}}/messages?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["discussions", "{{discussionId}}", "messages"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Discussions Actives",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/discussions?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["discussions"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ü§ù Matchs",
      "item": [
        {
          "name": "Demander Match",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"noteId\": \"{{noteId}}\",\n  \"message\": \"Ton message m'a vraiment touch√©. J'aimerais √©changer avec toi sur cette exp√©rience.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/match/request",
              "host": ["{{baseUrl}}"],
              "path": ["match", "request"]
            }
          }
        },
        {
          "name": "Demandes Re√ßues",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/match/requests/received",
              "host": ["{{baseUrl}}"],
              "path": ["match", "requests", "received"]
            }
          }
        },
        {
          "name": "Demandes Envoy√©es",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/match/requests/sent",
              "host": ["{{baseUrl}}"],
              "path": ["match", "requests", "sent"]
            }
          }
        },
        {
          "name": "Discussions Priv√©es",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/match/discussions",
              "host": ["{{baseUrl}}"],
              "path": ["match", "discussions"]
            }
          }
        }
      ]
    },
    {
      "name": "üîß Administration",
      "item": [
        {
          "name": "Statistiques DB",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/stats/database",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "stats", "database"]
            }
          }
        },
        {
          "name": "Statistiques Expiration",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/stats/expiration",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "stats", "expiration"]
            }
          }
        },
        {
          "name": "Informations Syst√®me",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/system",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "system"]
            }
          }
        },
        {
          "name": "Nettoyage Manuel",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/cleanup",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cleanup"]
            }
          }
        },
        {
          "name": "Remplir Donn√©es (Seed)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/seed",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "seed"]
            }
          }
        }
      ]
    },
    {
      "name": "üè• Sant√©",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/health",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["health"]
            }
          }
        },
        {
          "name": "Info Serveur",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": [""]
            }
          }
        }
      ]
    }
  ]
}